<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Anthony's Bachelor Party</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .content {
            padding: 30px;
        }

        .section {
            margin-bottom: 40px;
        }

        .section-title {
            font-size: 1.8em;
            color: #333;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #667eea;
        }

        .input-group {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        input, button {
            padding: 12px 16px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
        }

        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            cursor: pointer;
            font-weight: 600;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .table-container {
            overflow-x: auto;
            border-radius: 10px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
        }

        th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
        }

        td {
            padding: 12px 15px;
            border-bottom: 1px solid #f0f0f0;
        }

        .action-btn {
            padding: 6px 12px;
            margin: 2px;
            font-size: 12px;
            border-radius: 5px;
            border: none;
            color: white;
            cursor: pointer;
        }

        .delete-btn { background: #ef4444; }
        .edit-btn { background: #f59e0b; }
        .share-btn { background: #ec4899; }

        .payment-checkbox {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-value {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .empty-state {
            text-align: center;
            padding: 40px;
            color: #999;
            font-style: italic;
        }

        .share-container {
            background: #f0fdf4;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            border: 2px solid #10b981;
        }

        .share-link {
            display: flex;
            gap: 10px;
            align-items: center;
            margin: 10px 0;
        }

        .share-link input {
            flex: 1;
            background: white;
        }

        /* Attendee View Styles */
        .attendee-selector {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .attendee-summary {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .amount-owed {
            font-size: 2em;
            font-weight: bold;
            color: #f59e0b;
            margin: 10px 0;
        }

        .activity-card {
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            border-left: 4px solid;
        }

        .pending { background: #fef3c7; border-color: #f59e0b; }
        .paid { background: #d1fae5; border-color: #10b981; }
        .free { background: #ede9fe; border-color: #667eea; }

        .venmo-link {
            background: #3b82f6;
            color: white;
            padding: 8px 16px;
            border-radius: 5px;
            text-decoration: none;
            display: inline-block;
            margin: 5px 0;
        }

        .calendar-btn {
            background: #10b981;
            color: white;
            padding: 8px 16px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }

        @media (max-width: 768px) {
            .content { padding: 15px; }
            .input-group { flex-direction: column; }
            input, button { width: 100%; font-size: 16px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéâ Anthony's Bachelor Party üçª</h1>
            <p id="headerSubtitle">Event Management & Payment Tracking</p>
        </div>
        
        <div class="content" id="mainContent">
            <!-- Statistics -->
            <div class="stats">
                <div class="stat-card">
                    <div class="stat-value" id="totalAttendees">0</div>
                    <div class="stat-label">Attendees</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="totalActivities">0</div>
                    <div class="stat-label">Activities</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="totalCost">$0</div>
                    <div class="stat-label">Total Cost</div>
                </div>
            </div>

            <!-- Admin sections -->
            <div id="adminSections">
                <!-- Share Link Section -->
                <div class="section">
                    <h2 class="section-title">üîó Share with Everyone</h2>
                    <button onclick="generateShareLink()" class="share-btn">Generate Share Link</button>
                    <div id="shareContainer" style="display: none;"></div>
                </div>

                <!-- Attendees Section -->
                <div class="section">
                    <h2 class="section-title">üë• Attendees</h2>
                    <div class="input-group">
                        <input type="text" id="attendeeName" placeholder="Name" style="flex: 1;">
                        <button onclick="addAttendee()">Add Attendee</button>
                    </div>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr><th>Name</th><th>Actions</th></tr>
                            </thead>
                            <tbody id="attendeesBody">
                                <tr class="empty-state">
                                    <td colspan="2">No attendees added yet</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Activities Section -->
                <div class="section">
                    <h2 class="section-title">üéØ Activities</h2>
                    <div class="input-group">
                        <input type="text" id="activityName" placeholder="Activity Name" style="flex: 2;">
                        <input type="datetime-local" id="activityDate" style="flex: 1;">
                        <input type="text" id="activityLocation" placeholder="Location" style="flex: 1;">
                        <input type="number" id="activityCost" placeholder="Cost per person ($)" min="0" step="0.01" style="flex: 1;">
                        <button onclick="addActivity()">Add Activity</button>
                    </div>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Activity</th>
                                    <th>Date & Time</th>
                                    <th>Location</th>
                                    <th>Cost/Person</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="activitiesBody">
                                <tr class="empty-state">
                                    <td colspan="5">No activities planned yet</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Payment Tracking Section -->
            <div class="section">
                <h2 class="section-title">üí∞ Payment Tracking</h2>
                <div id="paymentContainer"></div>
            </div>
        </div>
    </div>

    <script>
        let attendees = [];
        let activities = [];
        let payments = {};
        const venmoUsername = 'alisheron';
        let isReadOnly = false;
        let viewingAttendee = null;

        // Initialize
        window.onload = function() {
            checkURLParams();
            if (!isReadOnly) {
                loadData();
            }
        };

        function checkURLParams() {
            const urlParams = new URLSearchParams(window.location.search);
            const view = urlParams.get('view');
            const dataParam = urlParams.get('data');
            
            if (view === 'readonly' && dataParam) {
                isReadOnly = true;
                try {
                    const decodedData = JSON.parse(atob(dataParam));
                    attendees = decodedData.attendees || [];
                    activities = decodedData.activities || [];
                    payments = decodedData.payments || {};
                    setupAttendeeView();
                } catch (e) {
                    console.error('Error loading data:', e);
                }
            }
        }

        function setupAttendeeView() {
            document.getElementById('adminSections').style.display = 'none';
            
            const mainContent = document.getElementById('mainContent');
            mainContent.innerHTML = `
                <div class="attendee-selector">
                    <h2 style="text-align: center; color: #667eea; margin-bottom: 10px;">Welcome to Anthony's Bachelor Party! üéâ</h2>
                    <p style="text-align: center; color: #666; margin-bottom: 30px;">Select your name to view your payment status and event details</p>
                    
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; margin-bottom: 10px; font-weight: 600;">Who are you?</label>
                        <select id="attendeeSelector" style="width: 100%; padding: 15px; font-size: 16px; border: 2px solid #e0e0e0; border-radius: 10px;">
                            <option value="">-- Select Your Name --</option>
                            ${attendees.map((att, idx) => `<option value="${idx}">${att.name}</option>`).join('')}
                        </select>
                    </div>
                    
                    <button onclick="viewMyStatus()" style="width: 100%; padding: 15px; font-size: 16px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 10px; cursor: pointer; font-weight: 600;">
                        View My Status
                    </button>
                    
                    <div style="margin-top: 30px; padding-top: 20px; border-top: 1px solid #e5e7eb;">
                        <h3 style="color: #333; margin-bottom: 15px;">üìÖ Event Overview</h3>
                        <div style="background: #f9fafb; padding: 15px; border-radius: 10px;">
                            <p><strong>Total Activities:</strong> ${activities.length}</p>
                            <p><strong>Total Attendees:</strong> ${attendees.length}</p>
                        </div>
                    </div>
                </div>
                <div id="personalView" style="display: none;"></div>
            `;
            updateStats();
        }

        function viewMyStatus() {
            const selector = document.getElementById('attendeeSelector');
            const selectedIdx = selector.value;
            
            if (selectedIdx === '') {
                alert('Please select your name');
                return;
            }
            
            viewingAttendee = parseInt(selectedIdx);
            showPersonalView();
        }

        function showPersonalView() {
            document.querySelector('.attendee-selector').style.display = 'none';
            const personalView = document.getElementById('personalView');
            personalView.style.display = 'block';
            
            const attendee = attendees[viewingAttendee];
            let totalOwed = 0;
            let paidCount = 0;
            let unpaidActivities = [];
            let paidActivities = [];
            let freeActivities = [];
            
            activities.forEach((activity, actIdx) => {
                if (activity.cost > 0) {
                    const paymentKey = `${viewingAttendee}_${actIdx}`;
                    if (payments[paymentKey]) {
                        paidActivities.push(activity);
                        paidCount++;
                    } else {
                        unpaidActivities.push(activity);
                        totalOwed += activity.cost;
                    }
                } else {
                    freeActivities.push(activity);
                }
            });
            
            personalView.innerHTML = `
                <button onclick="backToSelector()" style="margin-bottom: 20px; background: #6b7280;">‚Üê Back to Name Selection</button>
                
                <div class="attendee-summary">
                    <h2>Hi ${attendee.name}! üëã</h2>
                    <div class="amount-owed">Total Owed: $${totalOwed.toFixed(2)}</div>
                    
                    ${unpaidActivities.length > 0 ? `
                        <h3 style="color: #f59e0b; margin: 20px 0 15px;">‚è≥ Pending Payments (${unpaidActivities.length})</h3>
                        ${unpaidActivities.map(activity => {
                            const venmoLink = `https://venmo.com/${venmoUsername}?txn=pay&amount=${activity.cost}&note=${encodeURIComponent('Bachelor Party - ' + activity.name)}`;
                            const date = new Date(activity.date);
                            return `
                                <div class="activity-card pending">
                                    <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap;">
                                        <div>
                                            <strong>${activity.name}</strong><br>
                                            <small>üìÖ ${date.toLocaleDateString()} at ${date.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}</small><br>
                                            <small>üìç ${activity.location || 'TBD'}</small>
                                        </div>
                                        <div style="text-align: right;">
                                            <div style="font-size: 1.2em; font-weight: bold; margin-bottom: 5px;">$${activity.cost.toFixed(2)}</div>
                                            <a href="${venmoLink}" target="_blank" class="venmo-link">üí≥ Pay Now</a>
                                            <button class="calendar-btn" onclick="downloadCalendar(${activities.indexOf(activity)})">üìÖ Calendar</button>
                                        </div>
                                    </div>
                                </div>
                            `;
                        }).join('')}
                    ` : ''}
                    
                    ${paidActivities.length > 0 ? `
                        <h3 style="color: #10b981; margin: 20px 0 15px;">‚úÖ Paid Activities (${paidActivities.length})</h3>
                        ${paidActivities.map(activity => {
                            const date = new Date(activity.date);
                            return `
                                <div class="activity-card paid">
                                    <div style="display: flex; justify-content: space-between; align-items: center;">
                                        <div>
                                            <strong>${activity.name}</strong><br>
                                            <small>üìÖ ${date.toLocaleDateString()} at ${date.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}</small><br>
                                            <small>üìç ${activity.location || 'TBD'}</small>
                                        </div>
                                        <div>
                                            <span style="background: #10b981; color: white; padding: 4px 8px; border-radius: 4px; font-size: 12px;">PAID ‚úì</span>
                                            <button class="calendar-btn" onclick="downloadCalendar(${activities.indexOf(activity)})">üìÖ Calendar</button>
                                        </div>
                                    </div>
                                </div>
                            `;
                        }).join('')}
                    ` : ''}
                    
                    ${freeActivities.length > 0 ? `
                        <h3 style="color: #667eea; margin: 20px 0 15px;">üéâ Free Activities (${freeActivities.length})</h3>
                        ${freeActivities.map(activity => {
                            const date = new Date(activity.date);
                            return `
                                <div class="activity-card free">
                                    <div style="display: flex; justify-content: space-between; align-items: center;">
                                        <div>
                                            <strong>${activity.name}</strong><br>
                                            <small>üìÖ ${date.toLocaleDateString()} at ${date.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}</small><br>
                                            <small>üìç ${activity.location || 'TBD'}</small>
                                        </div>
                                        <button class="calendar-btn" onclick="downloadCalendar(${activities.indexOf(activity)})">üìÖ Calendar</button>
                                    </div>
                                </div>
                            `;
                        }).join('')}
                    ` : ''}
                    
                    <div style="margin-top: 30px; padding: 15px; background: #f9fafb; border-radius: 8px;">
                        <h3>üìä Summary</h3>
                        <p><strong>Total Owed:</strong> $${totalOwed.toFixed(2)}</p>
                        <p><strong>Activities Paid:</strong> ${paidCount} of ${paidActivities.length + unpaidActivities.length}</p>
                        <p><strong>Payment:</strong> Venmo @${venmoUsername}</p>
                    </div>
                </div>
            `;
        }

        function backToSelector() {
            document.querySelector('.attendee-selector').style.display = 'block';
            document.getElementById('personalView').style.display = 'none';
        }

        function downloadCalendar(activityIndex) {
            const activity = activities[activityIndex];
            const startDate = new Date(activity.date);
            const endDate = new Date(startDate.getTime() + 2 * 60 * 60 * 1000);
            
            const formatDate = (date) => {
                return date.toISOString().replace(/[-:]/g, '').replace(/\.\d{3}/, '');
            };
            
            const icsContent = `BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//Bachelor Party//EN
BEGIN:VEVENT
UID:${Date.now()}@bachelorparty.com
DTSTAMP:${formatDate(new Date())}
DTSTART:${formatDate(startDate)}
DTEND:${formatDate(endDate)}
SUMMARY:${activity.name}
DESCRIPTION:Anthony's Bachelor Party - ${activity.name}
LOCATION:${activity.location || 'TBD'}
END:VEVENT
END:VCALENDAR`;

            const blob = new Blob([icsContent], { type: 'text/calendar' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `${activity.name}.ics`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        // Admin functions
        function addAttendee() {
            const name = document.getElementById('attendeeName').value.trim();
            if (!name) {
                alert('Please enter a name');
                return;
            }
            
            attendees.push({ name });
            document.getElementById('attendeeName').value = '';
            saveData();
            updateTables();
        }

        function addActivity() {
            const name = document.getElementById('activityName').value.trim();
            const date = document.getElementById('activityDate').value;
            const location = document.getElementById('activityLocation').value.trim();
            const cost = parseFloat(document.getElementById('activityCost').value) || 0;
            
            if (!name) {
                alert('Please enter an activity name');
                return;
            }
            
            activities.push({ name, date, location, cost });
            
            // Clear inputs
            document.getElementById('activityName').value = '';
            document.getElementById('activityDate').value = '';
            document.getElementById('activityLocation').value = '';
            document.getElementById('activityCost').value = '';
            
            saveData();
            updateTables();
        }

        function deleteAttendee(index) {
            if (confirm('Delete this attendee?')) {
                attendees.splice(index, 1);
                // Clean up payments
                Object.keys(payments).forEach(key => {
                    const [attendeeIdx] = key.split('_').map(Number);
                    if (attendeeIdx === index) {
                        delete payments[key];
                    } else if (attendeeIdx > index) {
                        const [, activityIdx] = key.split('_').map(Number);
                        delete payments[key];
                        payments[`${attendeeIdx - 1}_${activityIdx}`] = payments[key];
                    }
                });
                saveData();
                updateTables();
            }
        }

        function deleteActivity(index) {
            if (confirm('Delete this activity?')) {
                activities.splice(index, 1);
                // Clean up payments
                Object.keys(payments).forEach(key => {
                    const [attendeeIdx, activityIdx] = key.split('_').map(Number);
                    if (activityIdx === index) {
                        delete payments[key];
                    } else if (activityIdx > index) {
                        delete payments[key];
                        payments[`${attendeeIdx}_${activityIdx - 1}`] = payments[key];
                    }
                });
                saveData();
                updateTables();
            }
        }

        function togglePayment(attendeeIdx, activityIdx) {
            const key = `${attendeeIdx}_${activityIdx}`;
            payments[key] = !payments[key];
            saveData();
            updatePaymentTracking();
        }

        function generateShareLink() {
            const baseURL = window.location.href.split('?')[0];
            const data = { attendees, activities, payments };
            const encodedData = btoa(JSON.stringify(data));
            const shareLink = `${baseURL}?view=readonly&data=${encodedData}`;
            
            document.getElementById('shareContainer').innerHTML = `
                <div class="share-container">
                    <h3>üì± Send This Link to Everyone:</h3>
                    <div class="share-link">
                        <input type="text" value="${shareLink}" readonly style="font-size: 14px;">
                        <button onclick="copyToClipboard('${shareLink}')">Copy Link</button>
                    </div>
                    
                    <h4 style="margin-top: 20px;">Sample Group Text:</h4>
                    <div style="background: white; padding: 15px; border-radius: 8px; font-style: italic; margin: 10px 0;">
                        "Hey everyone! üéâ Here's the link for my bachelor party details and payment tracking. Click the link, select your name, and you'll see what you owe plus all the event info: ${shareLink}"
                    </div>
                    <button onclick="copyToClipboard('Hey everyone! üéâ Here\\'s the link for my bachelor party details and payment tracking. Click the link, select your name, and you\\'ll see what you owe plus all the event info: ${shareLink}')">Copy Sample Text</button>
                </div>
            `;
            document.getElementById('shareContainer').style.display = 'block';
        }

        function copyToClipboard(text) {
            if (navigator.clipboard) {
                navigator.clipboard.writeText(text).then(() => {
                    alert('Copied to clipboard!');
                });
            } else {
                // Fallback
                const textArea = document.createElement('textarea');
                textArea.value = text;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                alert('Copied to clipboard!');
            }
        }

        function updateTables() {
            updateAttendeesTable();
            updateActivitiesTable();
            updatePaymentTracking();
            updateStats();
        }

        function updateAttendeesTable() {
            const tbody = document.getElementById('attendeesBody');
            if (attendees.length === 0) {
                tbody.innerHTML = '<tr class="empty-state"><td colspan="2">No attendees added yet</td></tr>';
                return;
            }
            
            tbody.innerHTML = attendees.map((attendee, index) => `
                <tr>
                    <td>${attendee.name}</td>
                    <td>
                        <button class="action-btn delete-btn" onclick="deleteAttendee(${index})">Delete</button>
                    </td>
                </tr>
            `).join('');
        }

        function updateActivitiesTable() {
            const tbody = document.getElementById('activitiesBody');
            if (activities.length === 0) {
                tbody.innerHTML = '<tr class="empty-state"><td colspan="5">No activities planned yet</td></tr>';
                return;
            }
            
            tbody.innerHTML = activities.map((activity, index) => {
                const date = activity.date ? new Date(activity.date) : null;
                const dateStr = date ? `${date.toLocaleDateString()} ${date.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}` : 'TBD';
                
                return `
                    <tr>
                        <td>${activity.name}</td>
                        <td>${dateStr}</td>
                        <td>${activity.location || 'TBD'}</td>
                        <td>$${activity.cost.toFixed(2)}</td>
                        <td>
                            <button class="action-btn delete-btn" onclick="deleteActivity(${index})">Delete</button>
                        </td>
                    </tr>
                `;
            }).join('');
        }

        function updatePaymentTracking() {
            const container = document.getElementById('paymentContainer');
            
            if (activities.filter(a => a.cost > 0).length === 0 || attendees.length === 0) {
                container.innerHTML = '<p class="empty-state">Add attendees and activities with costs to track payments</p>';
                return;
            }
            
            let html = '<div class="table-container"><table><thead><tr><th>Attendee</th>';
            
            activities.forEach(activity => {
                if (activity.cost > 0) {
                    html += `<th>${activity.name}<br><small>$${activity.cost.toFixed(2)}</small></th>`;
                }
            });
            
            html += '<th>Total Owed</th></tr></thead><tbody>';
            
            attendees.forEach((attendee, attIdx) => {
                let totalOwed = 0;
                html += `<tr><td><strong>${attendee.name}</strong></td>`;
                
                activities.forEach((activity, actIdx) => {
                    if (activity.cost > 0) {
                        const key = `${attIdx}_${actIdx}`;
                        const isPaid = payments[key];
                        
                        if (!isPaid) totalOwed += activity.cost;
                        
                        html += `<td style="text-align: center;">
                            <input type="checkbox" 
                                class="payment-checkbox" 
                                ${isPaid ? 'checked' : ''} 
                                onchange="togglePayment(${attIdx}, ${actIdx})">
                            <br><small>${isPaid ? '‚úÖ Paid' : '‚è≥ Pending'}</small>
                        </td>`;
                    }
                });
                
                html += `<td style="text-align: center; font-weight: bold; color: ${totalOwed > 0 ? '#f59e0b' : '#10b981'};">
                    $${totalOwed.toFixed(2)}
                </td></tr>`;
            });
            
            html += '</tbody></table></div>';
            container.innerHTML = html;
        }

        function updateStats() {
            document.getElementById('totalAttendees').textContent = attendees.length;
            document.getElementById('totalActivities').textContent = activities.length;
            
            const totalCost = activities.reduce((sum, activity) => sum + activity.cost, 0);
            document.getElementById('totalCost').textContent = `$${totalCost.toFixed(2)}`;
        }

        function loadData() {
            const savedAttendees = localStorage.getItem('bachelorPartyAttendees');
            const savedActivities = localStorage.getItem('bachelorPartyActivities');
            const savedPayments = localStorage.getItem('bachelorPartyPayments');
            
            if (savedAttendees) attendees = JSON.parse(savedAttendees);
            if (savedActivities) activities = JSON.parse(savedActivities);
            if (savedPayments) payments = JSON.parse(savedPayments);
            
            updateTables();
        }

        function saveData() {
            localStorage.setItem('bachelorPartyAttendees', JSON.stringify(attendees));
            localStorage.setItem('bachelorPartyActivities', JSON.stringify(activities));
            localStorage.setItem('bachelorPartyPayments', JSON.stringify(payments));
        }
    </script>
</body>
</html>
